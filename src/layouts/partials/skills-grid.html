{{ $proficiency := .Site.Data.resume.skills_proficiency }}
{{ $allSkills := slice }}

{{/* Collect all skills from resume with proficiency */}}
{{ range .Site.Data.resume.skills.languages }}
  {{ $prof := index $proficiency . }}
  {{ if and $prof (ne $prof nil) }}
    {{ $allSkills = $allSkills | append (dict "name" . "proficiency" $prof) }}
  {{ end }}
{{ end }}

{{ range .Site.Data.resume.skills.platforms_tools }}
  {{ $prof := index $proficiency . }}
  {{ if and $prof (ne $prof nil) }}
    {{ $allSkills = $allSkills | append (dict "name" . "proficiency" $prof) }}
  {{ end }}
{{ end }}

{{ range .Site.Data.resume.skills.data_stores }}
  {{ $prof := index $proficiency . }}
  {{ if and $prof (ne $prof nil) }}
    {{ $allSkills = $allSkills | append (dict "name" . "proficiency" $prof) }}
  {{ end }}
{{ end }}

{{/* Sort by proficiency desc, take top 8 */}}
{{ $topSkills := first 8 (sort $allSkills "proficiency" "desc") }}

<div class="skills-grid">
{{ range $topSkills }}
  <div class="skill-card" data-percent="{{ .proficiency }}">
    <svg class="progress-ring" viewBox="0 0 100 100">
      <circle class="progress-ring-bg" cx="50" cy="50" r="45"/>
      <circle class="progress-ring-fill" cx="50" cy="50" r="45"/>
    </svg>
    <h3>{{ .name }}</h3>
  </div>
{{ end }}
</div>
